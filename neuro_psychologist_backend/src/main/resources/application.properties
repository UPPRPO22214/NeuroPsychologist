spring.application.name=neuro_psychologist_backend

# AI API Configuration (Yandex GPT)
# ВАЖНО: Все чувствительные данные передаются через переменные окружения!
ai.api.url=https://llm.api.cloud.yandex.net/foundationModels/v1/completion
ai.api.key=${YANDEX_API_KEY}
ai.api.model=gpt://b1g4abao78d2pbvq0p3n/yandexgpt-lite/latest
ai.api.max-tokens=1000
ai.api.temperature=0.7
ai.api.folder-id=${AI_FOLDER_ID}
ai.api.key-id=${AI_KEY_ID}

# AI Prompt Configuration
ai.api.system-prompt=Ты опытный нейропсихолог с многолетним стажем работы. Анализируй текст пользователя и предоставь профессиональную психологическую оценку, основанную на современных методах нейропсихологии. Будь внимательным к деталям и предоставляй конструктивные рекомендации.
ai.api.user-prompt-template=Проанализируй следующий текст с точки зрения нейропсихологии. Обрати внимание на эмоциональное состояние, когнитивные паттерны, возможные психологические особенности и дай рекомендации:\n\n%s\n\nПредоставь структурированный анализ на русском языке, включающий:\n1. Эмоциональное состояние\n2. Когнитивные особенности\n3. Возможные проблемные области\n4. Рекомендации для улучшения психологического состояния

# Server Configuration
server.port=${SERVER_PORT:8080}
server.address=0.0.0.0

# PostgreSQL Database Configuration (Yandex Cloud)
# Формат URL для Yandex Cloud Managed PostgreSQL с SSL:
# jdbc:postgresql://host1:port1,host2:port2/database?targetServerType=master&ssl=true&sslmode=require
# ВАЖНО: Все данные БД передаются через переменные окружения
# sslmode=require - использует SSL но не проверяет сертификат (подходит для Yandex Cloud)
spring.datasource.url=${DATABASE_URL}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=${JPA_DDL_AUTO:update}
spring.jpa.show-sql=${JPA_SHOW_SQL:false}
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true

# Connection Pool Configuration (HikariCP)
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# JWT Configuration
jwt.secret=${JWT_SECRET:mySecretKeyForJWTTokenGenerationThatShouldBeAtLeast256BitsLongForHS256Algorithm}
jwt.expiration=${JWT_EXPIRATION:86400000}

# Actuator Configuration
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.endpoint.health.show-components=always
management.health.defaults.enabled=true

# Logging Configuration
logging.level.ru.nsu.neuropsychologist=INFO
logging.level.org.springframework.web=DEBUG
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# Frontend Configuration
frontend.base-url=${FRONTEND_BASE_URL:https://storage.yandexcloud.net/neuropsychologist-front/dist}
frontend.cache-dir=${FRONTEND_CACHE_DIR:./frontend-cache}
